<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pronunciation – Preview</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 40px;
        background-color: #f5f5f5;
    }

    h1 {
        text-align: center;
        margin-bottom: 30px;
    }

    #wordList {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 15px;
    }

    .word-btn {
        font-size: 16px;
        background-color: white;
        border: 2px solid black;
        border-radius: 5px;
        cursor: pointer;
        padding: 10px 15px;
        text-align: center;
    }

.word-btn.active {
    border: 2px solid red;
}

    .word-btn:hover {
        background-color: #f0f0f0;
    }

    .word-btn:active {
        transform: scale(0.97);
    }
</style>
</head>

<body>

<h1>Click a word to hear pronunciation</h1>

<div id="wordList"></div>

<script>

  const auth = window.firebaseApp;
  const db = window.firebaseApp;
  const signInWithPopup = window.firebaseApp;
  const GoogleAuthProvider = window.firebaseApp;
  const onAuthStateChanged = window.firebaseApp;
  const doc = window.firebaseApp;
  const setDoc = window.firebaseApp;
  const getDoc = window.firebaseApp;

let currentUser = null;

onAuthStateChanged(auth, user => {
  currentUser = user;
});

async function guardarUltimaPalabra(word) {
  if (!currentUser) return;

  await setDoc(
    doc(db, "progress", currentUser.uid),
    { lastWord: word },
    { merge: true }
  );
}




const words = [
  "apple", "book", "computer", "language", "development",
  "music", "internet", "design", "script", "browser",
  "window", "document", "function", "variable", "button",
  "audio", "server", "github", "mobile", "tablet"
];

const container = document.getElementById("wordList");
let activeButton = null;

// palabra guardada (si existe)
words.forEach(word => {
  const btn = document.createElement("button");
  btn.className = "word-btn";
  btn.textContent = word;

  // si esta palabra fue la última seleccionada
if (word === savedWord) {
  btn.classList.add("active");
  activeButton = btn;

  // scroll automático
  setTimeout(() => {
    btn.scrollIntoView({
      behavior: "smooth",
      block: "center"
    });
  }, 100);
}

  btn.onclick = () => {
    if (activeButton) {
      activeButton.classList.remove("active");
    }

    btn.classList.add("active");
    activeButton = btn;

    // guardar palabra
	guardarUltimaPalabra(word);

  };

  container.appendChild(btn);
});
</script>



<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import {
    getAuth,
    signInWithPopup,
    GoogleAuthProvider,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import {
    getFirestore,
    doc,
    setDoc,
    getDoc
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD36XPvB_ICTiDnFlasbv7GdATG950zPsA",
    authDomain: "english-pronunciation-3dba5.firebaseapp.com",
    projectId: "english-pronunciation-3dba5",
    storageBucket: "english-pronunciation-3dba5.firebasestorage.app",
    messagingSenderId: "956820967960",
    appId: "1:956820967960:web:c7fcc6c3dc4de70a9ca96d"
  };

  const app = initializeApp(firebaseConfig);
  const auth = window.firebaseApp;
  const db = window.firebaseApp;
  const signInWithPopup = window.firebaseApp;
  const GoogleAuthProvider = window.firebaseApp;
  const onAuthStateChanged = window.firebaseApp;
  const doc = window.firebaseApp;
  const setDoc = window.firebaseApp;
  const getDoc = window.firebaseApp;

  window.firebaseApp = {
    auth,
    db,
    signInWithPopup,
    GoogleAuthProvider,
    onAuthStateChanged,
    doc,
    setDoc,
    getDoc
  };
</script>

</body>
</html>

